<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Form view -->
    <record id="nav_report_rule_view_form"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.nav.report.rule.view.form</field>
        <field name="model">l10n.hu.nav.report.rule</field>
        <field name="priority">8</field>
        <field name="arch"
               type="xml"
        >
            <form>
                <header>
                </header>
                <sheet>
                    <div name="button_box"
                         class="oe_button_box"
                    >
                        <span class="float-start">
                            <field name="display_name"
                                   attrs="{'invisible': [('id', '=', False)]}"
                                   class="p-3 font-weight-bold"
                                   readonly="1"
                            />
                        </span>
                        <button name="toggle_active"
                                class="oe_stat_button"
                                type="object"
                        >
                            <field name="active"
                                   widget="boolean_toggle"
                            />
                            <span class="o_stat_text">Active</span>
                        </button>
                    </div>
                    <widget name="web_ribbon"
                            attrs="{'invisible': [('active', '=', True)]}"
                            bg_color="bg-danger"
                            title="Archived"
                    />
                    <div class="oe_title">
                        <h2>
                            <field name="name"
                                   placeholder="Name..."
                                   required="1"
                            />
                        </h2>
                    </div>
                    <group name="base">
                        <group>
                            <field name="rule_type"/>
                            <field name="value_method"/>
                        </group>
                        <group>
                            <field name="sequence"
                                    class="oe_inline"
                            />
                            <field name="description"
                                   placeholder="Description..."
                            />
                        </group>
                    </group>
                    <notebook>
                        <page name="details"
                              string="Details"
                        >
                            <group name="nav_report"
                                   attrs="{'invisible': [('rule_type', '!=', 'report_input')]}"
                                   string="Report"
                            >
                                <group>
                                    <field name="report_data_category"
                                           options="{'color_field': 'color', 'no_create': True,}"
                                           string="Data Category"
                                    />
                                </group>
                                <group>
                                    <field name="report_data_tag"
                                           options="{'color_field': 'color', 'no_create': True,}"
                                           string="Data Tag"
                                           widget="many2many_tags"
                                    />
                                </group>
                                <group name="report_template"
                                       colspan="2"
                                >
                                    <field name="report_template"
                                           string="Template"
                                           widget="many2many_tags"
                                    />
                                </group>
                            </group>
                            <group name="model"
                                   attrs="{
                                       'invisible': [('value_method', '=', 'fixed')],
                                   }"
                                   string="Model"
                            >
                                <group>
                                    <field name="ir_model"
                                           attrs="{
                                               'required': [('value_method', '!=', 'fixed')],
                                           }"
                                           options="{'no_create': True, 'no_open': True,}"
                                           string="Name"
                                    />
                                </group>
                                <group>
                                    <field name="ir_model_name"
                                           attrs="{'invisible': [('ir_model', '=', False)]}"
                                           string="Technical Name"
                                    />
                                </group>
                            </group>
                            <group name="value_code"
                                   attrs="{
                                       'invisible': [('value_method', '!=', 'code')],
                                   }"
                                   string="Code"
                            >
                                <group colspan="2">
                                    <field name="code_method"
                                           attrs="{
                                               'required': [('value_method', '=', 'code')],
                                           }"
                                           placeholder="Enter valid method name..."
                                           string="Method"
                                           style="word-break: break-word;"
                                    />
                                </group>
                                <group>
                                    <field name="code_parameters"
                                           placeholder="Enter valid json..."
                                           string="Parameters"
                                           style="word-break: break-word;"
                                    />
                                </group>
                                <group>
                                    <field name="code_result"
                                           placeholder="Enter valid json..."
                                           string="Result"
                                           style="word-break: break-word;"
                                    />
                                </group>
                            </group>
                            <group name="value_field"
                                   attrs="{
                                       'invisible': [('value_method', '!=', 'field')],
                                   }"
                                   string="Field"
                            >
                                <group>
                                     <field name="ir_model_field"
                                            attrs="{
                                                'invisible': [('ir_model', '=', False)],
                                                'required': [('value_method', '=', 'field')],
                                            }"
                                            domain="[('model_id', '=', ir_model)]"
                                            options="{'no_create': True, 'no_open': True,}"
                                            string=" Name"
                                    />
                                </group>
                                <group>
                                    <field name="ir_model_field_name"
                                           attrs="{'invisible': [('ir_model_field', '=', False)]}"
                                           string="Technical Name"
                                    />
                                </group>
                            </group>
                            <group name="filter"
                                   attrs="{
                                       'invisible': [('value_method', 'not in', ['field', 'filter'])],
                                       'required': [('value_method', 'in', ['field', 'filter'])],
                                   }"
                                   string="Filter"
                            >
                                <group>
                                    <field name="search_limit"
                                           class="col-2"
                                           string="Search Limit"
                                    />
                                </group>
                                <group>
                                    <field name="search_order"
                                           string="Search Order"
                                    />
                                </group>
                                <div name="search"
                                     attrs="{'invisible': [('ir_model', '=', False)]}"
                                     colspan="4"
                                >
                                    <field name="account_move_domain"
                                           attrs="{
                                               'invisible': [('ir_model_name', '!=', 'account.move')]
                                           }"
                                           nolabel="1"
                                           options="{'model': 'account.move'}"
                                           string="Domain"
                                           widget="domain"
                                    />
                                    <field name="account_move_line_domain"
                                           attrs="{
                                               'invisible': [('ir_model_name', '!=', 'account.move.line')]
                                           }"
                                           nolabel="1"
                                           options="{'model': 'account.move.line'}"
                                           string="Domain"
                                           widget="domain"
                                    />
                                    <field name="partner_domain"
                                           attrs="{
                                               'invisible': [('ir_model_name', '!=', 'res.partner')]
                                           }"
                                           nolabel="1"
                                           options="{'model': 'res.partner'}"
                                           string="Domain"
                                           widget="domain"
                                    />
                                    <field name="product_domain"
                                           attrs="{
                                               'invisible': [('ir_model_name', '!=', 'product.product')]
                                           }"
                                           nolabel="1"
                                           options="{'model': 'product.product'}"
                                           string="Domain"
                                           widget="domain"
                                    />
                                    <field name="custom_domain"
                                           attrs="{'invisible': [('ir_model_name', 'not in', ['account.move', 'account.move.line', 'product.product', 'res.partner'])]}"
                                           string="Custom Domain"
                                    />
                                </div>
                            </group>
                            <group name="value_fixed"
                                   attrs="{
                                       'invisible': [('value_method', '!=', 'fixed')],
                                   }"
                                   string="Value"
                            >
                                <group>
                                    <field name="value_type"
                                           attrs="{
                                               'required': [('value_method', '=', 'fixed')],
                                           }"
                                    />
                                </group>
                                <group>
                                    <field name="value_boolean"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'boolean'),
                                               ]
                                           }"
                                           string="Value"
                                           widget="boolean_toggle"
                                    />
                                    <field name="value_char"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'char'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'char'),
                                               ],
                                           }"
                                           placeholder="Enter value..."
                                           string="Single Line Text"
                                    />
                                    <field name="value_date"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'date'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'date'),
                                               ],
                                           }"
                                           string="Date"
                                    />
                                    <field name="value_datetime"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'datetime'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'datetime'),
                                               ],
                                           }"
                                           string="Date and Time"
                                    />
                                    <field name="value_float"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'float'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'float'),
                                               ],
                                           }"
                                           string="Decimal Number"
                                    />
                                    <field name="value_html"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'html'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'html'),
                                               ],
                                           }"
                                           string="HTML"
                                           style="word-break: break-word;"
                                    />
                                    <field name="value_integer"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'integer'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'integer'),
                                               ],
                                           }"
                                           string="Whole Number"
                                    />
                                    <field name="value_text"
                                           attrs="{
                                               'invisible': [
                                                   ('value_type', '!=', 'text'),
                                               ],
                                               'required': [
                                                   ('value_type', '=', 'text'),
                                               ],
                                           }"
                                           placeholder="Enter value..."
                                           string="Multiline Text"
                                           style="word-break: break-word;"
                                    />
                                </group>
                            </group>
                        </page>
                        <page name="audit"
                              attrs="{'invisible': [('id', '=', False)]}"
                              string="Audit"
                        >
                            <group>
                                <group name="company">
                                    <field name="id"/>
                                    <field name="company"
                                           readonly="1"
                                    />
                                </group>
                                <group name="audit">
                                    <field name="create_uid"
                                           readonly="1"
                                    />
                                    <field name="create_date"
                                           readonly="1"
                                    />
                                    <field name="write_uid"
                                           readonly="1"
                                    />
                                    <field name="write_date"
                                           readonly="1"
                                    />
                                </group>
                            </group>
                            <group name="technical"
                                   groups="base.group_no_one"
                                   string="Technical"
                            >
                                <group>
                                    <field name="technical_name"
                                           style="word-break: break-word;"
                                    />
                                    <field name="technical_type"/>
                                </group>
                                <group>
                                    <field name="technical_status"/>
                                    <field name="technical_timestamp"/>
                                </group>
                                <group colspan="2">
                                    <field name="technical_data"
                                           style="word-break: break-word;"
                                    />
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="activity_ids"
                           widget="mail_activity"
                    />
                    <field name="message_follower_ids"
                           widget="mail_followers"
                    />
                    <field name="message_ids"
                           widget="mail_thread"
                    />
                </div>
            </form>
        </field>
    </record>
    <!-- List view -->
    <record id="nav_report_rule_view_list"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.nav.report.rule.view.list</field>
        <field name="model">l10n.hu.nav.report.rule</field>
        <field name="priority">16</field>
        <field name="arch"
               type="xml"
        >
            <tree>
                <field name="id"
                       optional="hide"
                />
                <field name="sequence"
                       widget="handle"
                />
                <field name="name"/>
                <field name="rule_type"/>
                <field name="value_method"/>
                <field name="value_type"
                       optional="hide"
                />
                <field name="report_template"
                       optional="hide"
                       widget="many2many_tags"
                />
                <field name="technical_name"
                       optional="hide"
                />
                <field name="technical_type"
                       optional="hide"
                />
                <field name="company"
                       optional="hide"
                />
            </tree>
        </field>
    </record>
    <!-- List view inline -->
    <record id="nav_report_rule_view_list_inline"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.nav.report.rule.view.list.inline</field>
        <field name="model">l10n.hu.nav.report.rule</field>
        <field name="priority">32</field>
        <field name="arch"
               type="xml"
        >
            <tree>
                <field name="id"
                       optional="hide"
                />
                <field name="sequence"
                       widget="handle"
                />
                <field name="name"/>
                <field name="rule_type"/>
                <field name="value_method"/>
                <field name="value_type"
                       optional="hide"
                />
                <field name="technical_type"
                       optional="hide"
                />
                <field name="company"
                       optional="hide"
                />
            </tree>
        </field>
    </record>
    <!-- Search view -->
    <record id="nav_report_rule_view_search"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.nav.report.rule.view.search</field>
        <field name="model">l10n.hu.nav.report.rule</field>
        <field name="priority">16</field>
        <field name="arch"
               type="xml"
        >
            <search>
                <field name="name"/>
                <field name="technical_name"/>
                <field name="report_template"/>
                <separator/>
                <group name="filter_group_by"
                       expand="0"
                       string="Group By"
                >
                    <filter name="rule_type_group_by"
                            context="{'group_by': 'rule_type'}"
                            string="Rule Type"
                    />
                    <filter name="value_method_group_by"
                            context="{'group_by': 'value_method'}"
                            string="Value Method"
                    />
                    <filter name="value_type_group_by"
                            context="{'group_by': 'value_type'}"
                            string="Value Type"
                    />
                    <filter name="technical_type_group_by"
                            context="{'group_by': 'technical_type'}"
                            string="Technical Type"
                    />
                    <filter name="company_group_by"
                            context="{'group_by': 'company'}"
                            string="Company"
                    />
                </group>
            </search>
        </field>
    </record>
</odoo>
