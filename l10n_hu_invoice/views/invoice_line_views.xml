<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Form view -->
    <record id="invoice_line_view_form"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.invoice.line.view.form</field>
        <field name="model">l10n.hu.invoice.line</field>
        <field name="priority">16</field>
        <field name="arch"
               type="xml"
        >
            <form create="0"
                  delete="0"
            >
                <sheet>
                    <div name="button_box"
                         class="oe_button_box"
                    >
                    </div>
                    <h4>
                        <field name="line_description"/>
                    </h4>
                    <group>
                        <group>
                            <field name="quantity"/>
                            <field name="uom_name"/>
                            <field name="unit_price"/>
                            <field name="unit_price_net"/>
                        </group>
                        <group>
                            <field name="line_number"/>
                            <field name="line_net_amount"
                                   string="Net Amount"
                            />
                            <field name="line_vat_amount"
                                   string="VAT Amount"
                            />
                            <field name="line_gross_amount"
                                   string="Gross Amount"
                            />
                        </group>
                    </group>
                    <notebook readonly="1">
                        <page name="details"
                              string="Details"
                        >
                            <group>
                                <group>
                                    <field name="product"/>
                                    <field name="uom"
                                           string="UoM"
                                    />
                                    <field name="unit_of_measure"
                                           string="NAV UoM"
                                    />
                                    <field name="unit_of_measure_own"
                                           attrs="{'invisible': [('unit_of_measure', '=', 'own')]}"
                                           string="NAV UoM Own"
                                    />
                                    <field name="intermediated_service"/>
                                    <field name="deposit_indicator"
                                           string="Deposit"
                                    />
                                </group>
                                <group>
                                    <field name="currency"/>
                                    <field name="currency_huf"
                                           invisible="1"
                                    />
                                    <field name="unit_price_huf"
                                           string="Unit Price HUF"
                                    />
                                    <field name="unit_price_net_huf"
                                           string="Unit Price Net HUF"
                                    />
                                    <field name="unit_price_gross"
                                           string="Unit Price Gross"
                                    />
                                    <field name="unit_price_gross_huf"
                                           string="Unit Price Gross HUF"
                                    />
                                    <field name="line_net_amount_huf"
                                           string="Net Amount HUF"
                                    />
                                </group>
                            </group>
                            <group>
                                <group>
                                    <field name="line_expression_indicator"
                                           string="Line Expression"
                                    />
                                    <field name="line_nature_indicator"/>
                                    <field name="margin_scheme_indicator"
                                           string="Margin Scheme"
                                    />
                                    <field name="gpc_excise"/>
                                    <field name="neta_declaration"/>
                                    <field name="eu_oss_eligible"/>
                                    <field name="eu_oss_enabled"/>
                                </group>
                                <group>
                                    <field name="original_line"
                                           attrs="{'invisible': [('invoice_operation', 'not in', ['modify', 'storno'])]}"
                                    />
                                    <field name="line_number_reference"
                                           attrs="{'invisible': [('invoice_operation', 'not in', ['modify', 'storno'])]}"
                                    />
                                    <field name="line_operation"
                                           attrs="{'invisible': [('invoice_operation', 'not in', ['modify', 'storno'])]}"
                                    />
                                    <field name="is_price_refund"/>
                                    <field name="ekaer_ids"/>
                                    <field name="product_codes"/>
                                    <field name="references_to_other_lines"/>
                                    <field name="aggregate_invoice_line_data"/>
                                    <field name="diesel_oil_purchase"/>
                                </group>
                            </group>
                            <group>
                                <field name="new_transport_mean"/>
                            </group>
                            <group>
                                <field name="additional_line_data"/>
                            </group>
                        </page>
                        <page name="advance"
                              string="Advance"
                        >
                            <group>
                                <group>
                                    <field name="advance_indicator"/>
                                    <field name="advance_invoice"
                                           options="{'no_create': True,}"
                                           readonly="1"
                                           string="HU Invoice"
                                    />
                                    <field name="advance_account_move"
                                           string="Account Move"
                                    />
                                </group>
                                <group>
                                    <field name="advance_original_invoice"
                                           string="Original Invoice Number"
                                    />
                                    <field name="advance_payment_date"
                                           string="Payment Date"
                                    />
                                    <field name="advance_exchange_rate"
                                           string="Exchange Rate"
                                    />
                                </group>
                            </group>
                        </page>
                        <page name="discount"
                              string="Discount"
                        >
                            <group>
                                <group>
                                    <field name="discount_rate"
                                           class="oe_inline"
                                           string="Rate (%)"
                                    />
                                    <field name="discount_value"
                                           string="Value"
                                    />
                                    <field name="discount_description"
                                           string="Description"
                                    />
                                </group>
                                <group>
                                    <field name="discount_unit_price_net"
                                           string="Net Unit Price"
                                    />
                                    <field name="discount_unit_price_gross"
                                           string="Gross Unit Price"
                                    />
                                </group>
                            </group>
                        </page>
                        <page name="product_fee"
                              string="Product Fee"
                        >
                            <group>
                                <group>
                                    <field name="obligated_for_product_fee"/>
                                </group>
                            </group>
                            <group name="product_fee_clause">
                                <group name="takeover_data"
                                       string="Takeover Data"
                                >
                                    <field name="takeover_reason"/>
                                    <field name="takeover_amount"/>
                                </group>
                                <group name="customer_declaration"
                                       string="Customer Declaration"
                                >
                                    <field name="product_stream"/>
                                    <field name="product_weight"/>
                                </group>
                            </group>
                            <group name="product_fee_content"
                                   string="Product Fee Content"
                            >
                                <field name="product_fee_content"
                                       colspan="2"
                                       context="{
                                           'default_scope': 'line',
                                           'tree_view_ref': 'l10n_hu_invoice.l10n_hu_invoice_product_fee_view_list_line',
                                       }"
                                       nolabel="1"
                                />
                            </group>
                        </page>
                        <page name="tax"
                              string="Tax"
                        >
                            <group>
                                <group>
                                    <field name="account_tax"/>
                                    <field name="account_tax_amount_type"
                                           string="Amount Type"
                                    />
                                    <field name="account_tax_amount"
                                           string="Amount"
                                    />
                                    <field name="account_tax_price_include"
                                           string="Price Include"
                                    />
                                    <field name="account_tax_group"
                                           string="Tax Group"
                                    />
                                </group>
                                <group>
                                    <field name="vat_type"/>
                                    <field name="vat_percentage"/>
                                    <field name="vat_amount_mismatch_case"
                                           attrs="{'invisible': [('vat_type', '!=', 'exemption')]}"
                                           string="Amount Mismatch Case"
                                    />
                                    <field name="vat_exemption_case"
                                           attrs="{'invisible': [('vat_type', '!=', 'exemption')]}"
                                           string="Exemption Case"
                                    />
                                    <field name="vat_out_of_scope_case"
                                           attrs="{'invisible': [('vat_type', '!=', 'out_of_scope')]}"
                                           string="Out of Scope Case"
                                    />
                                    <field name="vat_reason"
                                           attrs="{'invisible': [('vat_type', 'not in', ['exemption', 'out_of_scope'])]}"
                                           string="Reason"
                                    />
                                    <field name="line_vat_amount_huf"
                                           string="VAT Amount HUF"
                                    />
                                    <field name="line_gross_amount_huf"
                                           string="Gross Amount HUF"
                                    />
                               </group>
                            </group>
                        </page>
                        <page name="audit"
                              string="Audit"
                              attrs="{'invisible': [('id', '=', False)]}"
                        >
                            <group>
                                <group>
                                    <field name="id"/>
                                    <field name="company"/>
                                    <field name="company_currency"/>
                                    <field name="invoice"/>
                                    <field name="invoice_category"/>
                                    <field name="invoice_operation"/>
                                </group>
                                <group>
                                    <field name="create_uid"
                                           readonly="1"
                                    />
                                    <field name="create_date"
                                           readonly="1"
                                    />
                                    <field name="write_uid"
                                           readonly="1"
                                    />
                                    <field name="write_date"
                                           readonly="1"
                                    />
                                </group>
                            </group>
                            <group>
                                <field name="account_move"/>
                                <field name="account_move_line"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!-- Form view -->
    <record id="invoice_line_view_form_advance"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.invoice.line.view.form.advance</field>
        <field name="model">l10n.hu.invoice.line</field>
        <field name="priority">24</field>
        <field name="arch"
               type="xml"
        >
            <form create="0"
                  delete="0"
                  edit="1"
            >
                <sheet>
                    <h4>
                        <field name="line_description"
                               readonly="1"
                        />
                    </h4>
                    <group>
                        <group>
                            <field name="supplier"/>
                            <field name="customer"/>
                            <field name="line_number"
                                   readonly="1"
                            />
                        </group>
                        <group>
                            <field name="line_net_amount"
                                   readonly="1"
                                   string="Net Amount"
                            />
                            <field name="line_vat_amount"
                                   readonly="1"
                                   string="VAT Amount"
                            />
                            <field name="line_gross_amount"
                                   readonly="1"
                                   string="Gross Amount"
                            />
                        </group>
                    </group>
                    <notebook>
                        <page name="advance"
                              string="Advance"
                        >
                            <group>
                                <group>
                                    <field name="advance_indicator"/>
                                    <field name="advance_invoice"
                                           domain="[
                                               ('advance_status', '=', 'issue'),
                                               ('customer', '=', customer),
                                               ('supplier', '=', supplier),
                                           ]"
                                           options="{'no_create': True,}"
                                           readonly="0"
                                           string="HU Invoice"
                                    />
                                    <field name="advance_account_move"
                                           string="Account Move"
                                    />
                                </group>
                                <group>
                                    <field name="advance_original_invoice"
                                           attrs="{
                                               'readonly': [('advance_invoice', '!=', False)],
                                           }"
                                           force_save="1"
                                           required="1"
                                           string="Original Invoice Number"
                                    />
                                    <field name="advance_payment_date"
                                           attrs="{
                                               'readonly': [('advance_invoice', '!=', False)],
                                           }"
                                           force_save="1"
                                           required="1"
                                           string="Payment Date"
                                    />
                                    <field name="advance_exchange_rate"
                                           attrs="{
                                               'readonly': [('advance_invoice', '!=', False)],
                                           }"
                                           force_save="1"
                                           required="1"
                                           string="Exchange Rate"
                                    />
                                </group>
                            </group>
                        </page>
                        <page name="audit"
                              attrs="{'invisible': [('id', '=', False)]}"
                              readonly="1"
                              string="Audit"
                        >
                            <group>
                                <group>
                                    <field name="id"/>
                                    <field name="company"/>
                                    <field name="company_currency"/>
                                    <field name="invoice"/>
                                    <field name="invoice_category"/>
                                    <field name="invoice_operation"/>
                                </group>
                                <group>
                                    <field name="create_uid"
                                           readonly="1"
                                    />
                                    <field name="create_date"
                                           readonly="1"
                                    />
                                    <field name="write_uid"
                                           readonly="1"
                                    />
                                    <field name="write_date"
                                           readonly="1"
                                    />
                                </group>
                            </group>
                            <group>
                                <field name="account_move"/>
                                <field name="account_move_line"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!-- List view -->
    <record id="invoice_line_view_list"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.invoice.line.view.list</field>
        <field name="model">l10n.hu.invoice.line</field>
        <field name="priority">16</field>
        <field name="arch"
               type="xml"
        >
            <tree create="0"
                  delete="1"
                  edit="1"
            >
                <field name="invoice"/>
                <field name="line_number"/>
                <field name="product"
                       optional="hide"
                />
                <field name="line_description"
                       optional="show"
                       string="Description"
                />
                <field name="quantity"/>
                <field name="uom_name"
                       string="UoM"
                />
                <field name="unit_of_measure"
                       string="NAV UoM"
                />
                <field name="unit_price"/>
                <field name="line_number"/>
                <field name="line_net_amount"
                       string="Net Amount"
                />
                <field name="line_vat_amount"
                       string="VAT Amount"
                />
                <field name="line_gross_amount"
                       string="Gross Amount"
                />
                <field name="eu_oss_eligible"
                       optional="hide"
                />
                <field name="eu_oss_enabled"
                       optional="hide"
                />
                <field name="write_date"
                       optional="hide"
                />
                <field name="company"
                       optional="hide"
                />
            </tree>
        </field>
    </record>
    <!-- List view inline -->
    <record id="invoice_line_view_list_inline"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.invoice.line.view.list.inline</field>
        <field name="model">l10n.hu.invoice.line</field>
        <field name="priority">24</field>
        <field name="arch"
               type="xml"
        >
            <tree create="0"
                  delete="1"
                  edit="1"
            >
                <field name="currency"
                       optional="hide"
                />
                <field name="currency_huf"
                       optional="hide"
                />
                <field name="line_number"
                       string="Nr."
                />
                <field name="product"
                       optional="hide"
                />
                <field name="line_description"
                       optional="show"
                       string="Description"
                />
                <field name="quantity"/>
                <field name="uom_name"
                       string="UoM"
                />
                <field name="unit_price"/>
                <field name="line_net_amount"
                       string="Net Amount"
                       sum="1"
                />
                <field name="line_vat_amount"
                       string="VAT Amount"
                       sum="1"
                />
                <field name="line_gross_amount"
                       string="Gross Amount"
                       sum="1"
                />
                <field name="eu_oss_eligible"
                       optional="hide"
                />
                <field name="eu_oss_enabled"
                       optional="hide"
                />
            </tree>
        </field>
    </record>
    <!-- List view inline advance -->
    <record id="invoice_line_view_list_inline_advance"
            model="ir.ui.view"
    >
        <field name="name">l10n.hu.invoice.line.view.list.inline.advance</field>
        <field name="model">l10n.hu.invoice.line</field>
        <field name="priority">32</field>
        <field name="arch"
               type="xml"
        >
            <tree create="0"
                  delete="0"
                  edit="1"
            >
                <field name="line_description"
                       string="Invoice Line"
                />
                <field name="line_net_amount"
                       string="Net Amount"
                />
                <field name="advance_invoice"
                       options="{'no_create': True}"
                       string="Advance Invoice"
                />
                <field name="advance_original_invoice"
                       optional="hide"
                />
                <field name="advance_payment_date"
                       optional="hide"
                />
                <field name="advance_exchange_rate"
                       optional="hide"
                />
            </tree>
        </field>
    </record>
</odoo>
